# Копирование памяти

Когда `Python` вызывает функцию/Метод `PHP`, параметры и возвращаемые значения могут включать копирование памяти, что должно быть учтено при написании программ, чувствительных к производительности.

## Параметры

- целые числа, логические значения, числовые плавающие точки, пустое значение `None` всегда передаются по значению

- Объекты, ресурсы, ссылки всегда передаются по ссылке, без копирования памяти
- Строки, массивы будут рекурсивно глубоко скопированы в их первичные типы

```python
arg1 = 1234
arg2 = 1234.5678
arg3 = True

arg4 = phpy.Object('stdClass')
arg5 = phpy.Reference()
arg6 = phpy.call('fopen', "php://input", "r")

arg7 = {'hello' : 'world'}
arg8 = "hello world"
arg9 = [1, 2, 3, 4, 5]

phpy.call('test', arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9)
```

- `arg1`, `arg2`, `arg3` будут преобразованы в целые числа, числовые плавающие точки, логические значения в `PHP`, и будут напрямую скопированы числа

- `arg4`, `arg5`, `arg6` будут напрямую переданы в `PHP` по ссылке, без создания копий памяти
- `arg6`, `arg7`, `arg8` будут пронумерованны, глубоко скопированы в память и преобразованы в `PHP` массивы, строки

## Возвращаемые значения

- целые числа, логические значения, числовые плавающие точки, пустые значения (`None` и `null`) будут преобразованы в первичные типы `Python`

- Все другие вещи, возвращенные из `Python`, являются типом `PyObject`
- Также можно использовать тип `PyObject` в `PHP` коде для возврата первичных типов `Python` с прозрачной передачей

## Избежание копирования памяти
Используйте объекты `phpy.String`, `phpy.Array` при вызове функций `PHP`, чтобы избежать копирования памяти.
